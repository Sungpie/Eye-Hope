# 운영 환경 배포 전 체크리스트

이 문서는 Eye-Hope 서비스를 운영 환경에 배포하기 전에 확인해야 할 사항들을 정리한 체크리스트입니다.

## 개선된 사항

### 1. 예외 처리 개선
- 글로벌 예외 핸들러 확장 (다양한 예외 유형에 대한 처리 추가)
- `ResourceNotFoundException` 추가 (리소스를 찾을 수 없을 때 사용)
- 서비스 레이어에서 예외 처리 개선

### 2. 트랜잭션 관리 개선
- `NewsService`에 `@Transactional` 어노테이션 추가
- 읽기 전용 메소드에 `readOnly = true` 설정

### 3. 스케줄러 안정성 개선
- 스케줄러에 예외 처리 추가하여 한 번의 실패가 전체 스케줄링에 영향을 미치지 않도록 함

### 4. 데이터 검증 강화
- `savePosts` 메소드에 입력값 검증 로직 추가
- 성공/실패/건너뜀 카운터 추가로 모니터링 개선

### 5. 운영 환경 설정 최적화
- 운영 환경에서 `hibernate.ddl-auto`를 `validate`로 설정
- 운영 환경에서 SQL 로깅 비활성화
- 데이터베이스 커넥션 풀 설정 최적화

## 추가 권장 사항

### 1. 보안 강화
- [ ] API 엔드포인트에 적절한 인증/인가 메커니즘 추가
- [ ] 민감한 정보(API 키, 비밀번호 등)는 환경 변수나 외부 시크릿 관리 서비스 사용
- [ ] HTTPS 적용 확인
- [ ] CORS 설정 검토

### 2. 성능 최적화
- [ ] 대용량 데이터 처리를 위한 페이지네이션 검토
- [ ] 캐싱 전략 구현 (Redis 등 고려)
- [ ] 데이터베이스 인덱스 최적화

### 3. 모니터링 및 로깅
- [ ] 애플리케이션 헬스 체크 엔드포인트 구현
- [ ] 모니터링 도구 연동 (Prometheus, Grafana 등)
- [ ] 로그 집계 시스템 구축 (ELK 스택 등)
- [ ] 알림 시스템 구축 (중요 오류 발생 시 알림)

### 4. 배포 및 운영
- [ ] CI/CD 파이프라인 구축
- [ ] 무중단 배포 전략 수립
- [ ] 백업 및 복구 전략 수립
- [ ] 스케일링 전략 수립 (부하 증가 시 대응 방안)

### 5. 테스트
- [ ] 단위 테스트 커버리지 확인
- [ ] 통합 테스트 구현
- [ ] 부하 테스트 수행
- [ ] 보안 취약점 테스트 수행

## 운영 환경 설정 변경 사항

운영 환경에서는 다음 설정을 적용해야 합니다:

```yaml
spring:
  profiles:
    active: prod  # 운영 환경 프로필 활성화
  jpa:
    hibernate:
      ddl-auto: validate  # 스키마 변경 방지
    show-sql: false  # SQL 로깅 비활성화
    properties:
      hibernate:
        format_sql: false  # SQL 포맷팅 비활성화
  datasource:
    hikari:
      maximum-pool-size: 30  # 커넥션 풀 크기 증가
      minimum-idle: 10  # 최소 유휴 커넥션 수 증가
```

## 결론

위 체크리스트의 항목들을 모두 확인하고 필요한 조치를 취한 후 운영 환경에 배포하면 안정적인 서비스 운영이 가능할 것입니다. 특히 보안, 성능, 모니터링 관련 항목은 서비스 품질에 직접적인 영향을 미치므로 우선적으로 검토하는 것이 좋습니다.